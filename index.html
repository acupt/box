<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>render</title>
</head>
<body>
<div id="msg" style="font-size: 48px;padding: 32px">
    Hello, world!
</div>
</body>
</html>

<script>

    document.getElementById('msg').innerHTML = "开始执行js";

    //取URL后面的参数
    let searchStr = window.location.search;
    if (searchStr.indexOf('?') === 0) {
        searchStr = searchStr.substr(1);
    }

    let targetUrl = "";
    const kvList = searchStr.split("&");

    //遍历参数，找到待跳转url，其它参数作为跳转url的参数
    let params = "";
    for (let i = 0; i < kvList.length; i++) {
        let kv = kvList[i].split("=");
        let k = kv[0];
        let v = decodeURI(kv[1]);
        if (k === 'url') {
            targetUrl = v;
        } else {
            if (params) {
                params += "&" + k + "=" + v;
            } else {
                params = "?" + k + "=" + v;
            }
        }
    }

    document.getElementById('msg').innerHTML = "targetUrl = " + targetUrl;

    if (targetUrl) {
        if (params) {
            targetUrl += params;
        }
        document.getElementById('msg').innerHTML = "Opening " + targetUrl;

        //跳过去，如果是APP schema则会拉起APP
        //window.location.href = targetUrl;
    }

</script>
