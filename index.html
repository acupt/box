<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>render</title>
</head>
<body>
<div id="msg" style="font-size: 48px;padding: 32px">
    Hello, world!
</div>
</body>
</html>

<script>
    let searchStr = window.location.search;
    if (searchStr.indexOf('?') === 0) {
        searchStr = searchStr.substr(1);
    }
    const kvList = searchStr.split("&");
    console.log(kvList);
    
    let wait = 0;
    if (kvList) {
        for (let i = 0; i < kvList.length; i++) {
            let kv = kvList[i].split("=");
            if (kv[0] === 'wait') {
                wait = kv[1];
            }
        }
    }

    let targetUrl = "kademo://auth";

    targetUrl += window.location.search;

    console.log("wait=" + wait);
    if (wait > 0) {
        document.getElementById('msg').innerHTML = "waiting... " + wait + "ms";
        setTimeout(jump, wait);
    } else {
        jump();
    }

    function jump() {
        document.getElementById('msg').innerHTML = "starting... " + targetUrl;
        window.location.href = targetUrl;
    }
</script>
